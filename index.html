<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>CELLlab - Login Gate</title>
<link rel="stylesheet" href="style.css" />
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
/* ===== PANTALLA DE INICIO - ANIMACIÓN A ===== */
#entryGate {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: #0b0f28;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  z-index: 999999;
  animation: fadeIn 1s ease;
}

/* El manejo de la tecla Escape fue movido al bloque <script> (había quedado insertado aquí por error) */
#entryGate.fade-out {
  animation: fadeOut 1s ease forwards;
}

.gate-title {
  font-size: 32px;
  font-weight: 600;
  color: #ffffff;
  margin: 25px 0;
  text-align: center;
}

.gate-buttons {
  display: flex;
  gap: 20px;
  opacity: 0;
  animation: fadeUp 1s ease forwards;
  animation-delay: 1.5s;
}

.gate-logo {
  width: 180px;
  height: 180px;
  background: url('images/logo.jpeg');
  background-size: cover;
  background-position: center;
  border-radius: 50%;
  animation: popIn 1.3s ease;
}

.gate-btn {
  background: #1640ff;
  color: white;
  padding: 12px 25px;
  border-radius: 10px;
  font-size: 18px;
  cursor: pointer;
  transition: 0.3s;
  border: none;
}
.gate-btn:hover { background: #0d2cd6; }

/* ===== LOGIN WINDOW MODERNO ===== */
.login-window {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.65);
    backdrop-filter: blur(5px);
    justify-content: center;
    align-items: center;
    z-index: 99999;
    animation: fadeIn 0.3s ease;
}

.login-box {
    background: #ffffff;
    width: 320px;
    padding: 25px;
    border-radius: 18px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.45);
    text-align: center;
    animation: popUp 0.35s ease;
    position: relative;
}

.login-close {
    position: absolute;
    top: 15px;
    right: 20px;
    font-size: 30px;
    font-weight: bold;
    color: #999;
    cursor: pointer;
    transition: color 0.3s;
    line-height: 1;
    user-select: none;
}

.login-close:hover {
    color: #333;
}

.login-box h2 {
    color: #333;
    margin-top: 10px;
    margin-bottom: 10px;
}

.login-sub {
    color: #666;
    font-size: 14px;
    margin-bottom: 15px;
}

.login-box input {
    width: 100%;
    padding: 12px;
    margin-top: 12px;
    border-radius: 10px;
    border: 1px solid #ccc;
    outline: none;
    font-size: 14px;
}

.login-box input:focus {
    border-color: #1640ff;
    box-shadow: 0 0 0 2px rgba(22, 64, 255, 0.1);
}

.login-btn {
    width: 100%;
    padding: 12px;
    margin-top: 18px;
    background: #1640ff;
    color: white;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    font-weight: bold;
    transition: 0.25s;
    font-size: 15px;
}
.login-btn:hover { background: #0d2cd6; }

.login-footer { 
    margin-top: 15px; 
    font-size: 14px;
    color: #666;
}

.login-footer a {
    color: #1640ff;
    text-decoration: none;
    font-weight: 500;
}

.login-footer a:hover {
    text-decoration: underline;
}

.form-message {
    margin-top: 15px;
    padding: 10px;
    border-radius: 8px;
    font-size: 14px;
}

.error-message {
    color: #d32f2f;
    background: #ffebee;
    padding: 10px;
    border-radius: 8px;
    margin: 0;
}

.success-message {
    color: #388e3c;
    background: #e8f5e9;
    padding: 10px;
    border-radius: 8px;
    margin: 0;
}

/* ===== ANIMACIONES ===== */
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
@keyframes fadeOut { from { opacity: 1; } to { opacity: 0; visibility: hidden; } }
@keyframes popIn { from { transform: scale(0); } to { transform: scale(1); } }
@keyframes slideDown { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
@keyframes fadeUp { from { opacity: 0; transform: translateY(20px);} to { opacity: 1; transform: translateY(0);} }
@keyframes popUp { from { transform: translateY(-10px) scale(0.95); opacity:0 } to { transform: translateY(0) scale(1); opacity:1 } }

/* Small helper to hide page scroll while gate shown */
body.showing-gate { overflow: hidden; }
</style>
</head>
<body class="showing-gate">

<!-- =====================================
     HEADER CON INFO DE USUARIO
===================================== -->
<header id="userHeader" style="display: none;">
    <div class="user-info-section">
        <div class="user-avatar">
            <span id="userInitials"></span>
        </div>
        <div class="user-details">
            <span id="headerUserName" class="user-name"></span>
            <span id="headerUserEmail" class="user-email"></span>
        </div>
    </div>
</header>

<!-- =====================================
     SIDEBAR DE NAVEGACIÓN
===================================== -->
<nav id="mainNav" class="sidebar" style="display: none;">
    <div class="sidebar-header">
        <div class="sidebar-logo"></div>
    </div>
    <div class="sidebar-links">
        <a href="#seccion1" class="nav-link">Biomoléculas</a>
        <a href="#seccion2" class="nav-link">Citoesqueleto</a>
        <a href="#seccion3" class="nav-link">Endomembranas</a>
        <a href="#seccion4" class="nav-link">Matriz Extracelular</a>
        <a href="#seccion5" class="nav-link">Membrana Plasmática</a>
        <a href="#seccion6" class="nav-link">Mitocondrias</a>
        <a href="#seccion7" class="nav-link">Núcleo</a>
        <a href="#seccion8" class="nav-link">Señalización Celular</a>
        <a href="#seccion9" class="nav-link">Síntesis de Proteínas</a>
        <a href="#seccion10" class="nav-link">Visión Global</a>
    </div>
    <div class="sidebar-footer">
        <button class="logout-btn" onclick="handleLogout()">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                <polyline points="16 17 21 12 16 7"></polyline>
                <line x1="21" y1="12" x2="9" y2="12"></line>
            </svg>
            Cerrar Sesión
        </button>
    </div>
</nav>

<!-- =====================================
     PANTALLA DE ENTRADA ANIMADA (GATE)
===================================== -->
<div id="entryGate">
  <div class="gate-logo" role="img" aria-label="Logo"></div>
    <div class="gate-title">Bienvenido a CELLlab</div>
  <div class="gate-buttons">
      <button class="gate-btn" onclick="openLoginWindow()">Iniciar Sesión</button>
      <button class="gate-btn" onclick="openRegisterModal()">Registrarse</button>
  </div>
</div>

<!-- ==== NUEVO LOGIN WINDOW ==== -->
<div id="loginWindow" class="login-window" aria-hidden="true">
    <div class="login-box" role="dialog" aria-modal="true">
        <span class="login-close" onclick="closeLoginWindow()">&times;</span>
        <h2>Bienvenido</h2>
        <p class="login-sub">Accede a tu cuenta</p>

        <form id="loginWindowForm" onsubmit="handleLoginWindow(event)">
            <input type="email" id="lw-email" placeholder="Correo electrónico" required>
            <input type="password" id="lw-password" placeholder="Contraseña" required>

            <button type="submit" class="login-btn">Ingresar</button>
        </form>

        <p class="login-footer">
            ¿No tienes cuenta?
            <a href="#" onclick="switchFromWindowToRegister()">Regístrate aquí</a>
        </p>
    </div>
</div>

<!-- ==== REGISTER MODAL (simple) ==== -->
<div id="registerModal" class="login-window" style="display:none;" aria-hidden="true">
    <div class="login-box" role="dialog" aria-modal="true">
        <span class="login-close" onclick="closeRegisterModal()">&times;</span>
        <h2>Crear Cuenta</h2>
        <form id="registerForm" onsubmit="handleRegister(event)">
            <input type="text" id="register-name" required placeholder="Nombre completo">
            <input type="email" id="register-email" required placeholder="Correo electrónico">
            <input type="password" id="register-password" required placeholder="Contraseña (6+)" minlength="6">
            <input type="password" id="register-confirm" required placeholder="Confirmar contraseña" minlength="6">
            <button type="submit" class="login-btn">Registrarse</button>
        </form>
        <div id="register-message" class="form-message" aria-live="polite"></div>
        <p class="login-footer">¿Ya tienes cuenta? <a href="#" onclick="switchToLoginFromRegister()">Inicia sesión</a></p>
    </div>
</div>

<!-- ==== LOGIN MODAL (legacy) ==== -->
<div id="loginModal" class="login-window" style="display:none;" aria-hidden="true">
    <div class="login-box" role="dialog" aria-modal="true">
        <span class="login-close" onclick="closeLoginModal()">&times;</span>
        <h2>Iniciar Sesión</h2>
        <form id="loginForm" onsubmit="handleLogin(event)">
            <input type="email" id="login-email" required placeholder="tu@email.com">
            <input type="password" id="login-password" required placeholder="••••••••">
            <button type="submit" class="login-btn">Entrar</button>
        </form>
        <div id="login-message" class="form-message" aria-live="polite"></div>
        <p class="login-footer">¿No tienes cuenta? <a href="#" onclick="switchToRegister()">Regístrate</a></p>
    </div>
</div>

    <!-- Secciones -->
    <section id="seccion1">
    <div class="container">
    <h2>Composición y Clasificación de las Biomoléculas</h2>
    <p>Estas moléculas se componen principalmente de carbono (C), hidrógeno (H), oxígeno (O) y nitrógeno (N), aprovechando la versatilidad del carbono para formar estructuras complejas. Se clasifican en dos grandes grupos:</p>
    <div class="row">
        <div class="card1">
            <h4>Biomoléculas Inorgánicas</h4>
            <p>Comunes en seres vivos y materia inerte. Incluyen el agua (mayor componente de los organismos) y las sales minerales (esenciales para el equilibrio interno y procesos como la transmisión nerviosa).</p>
        </div>

        <div class="card2">
            <h4>Biomoléculas Orgánicas</h4>
            <p>Exclusivas de los seres vivos y basadas en carbono. Las principales son:</p>
            <ul>
                <li>Carbohidratos: Energía inmediata.</li>
                <li>Lípidos: Reserva energética y membranas celulares.</li>
                <li>Proteínas: Funciones estructurales, enzimáticas y defensivas.</li>
                <li>Ácidos Nucleicos (ADN/ARN): Almacenan y transmiten información genética.</li>
            </ul>
        </div>
    </div>
    </div>
</section>


    <section id="seccion2" class="content-section">
        <div class="container">
            <h2>El Citoesqueleto: La Arquitectura Dinámica Celular</h2>
            <p class="section-intro">El citoesqueleto es una compleja red tridimensional de filamentos proteicos en el citoplasma de las células eucariotas. No es estático, sino que se reorganiza constantemente para mantener la forma celular, permitir el movimiento y organizar los componentes internos.</p>
            <div class="cyto-visuals">
                <div class="cyto-item">
                    <div class="cyto-image" style="background-image: url('images/actina.png');"></div>
                    <h3>Microfilamentos (Actina)</h3>
                    <p>Los más delgados (7 nm). Proporcionan soporte estructural bajo la membrana plasmática y participan en el movimiento celular (contracción muscular, citocinesis) y la adhesión celular.</p>
                </div>
                <div class="cyto-item">
                    <div class="cyto-image" style="background-image: url('images/filamentos.png');"></div>
                    <h3>Filamentos Intermedios</h3>
                    <p>Grosor intermedio (8-12 nm), formados por proteínas como las queratinas o la vimentina. Brindan <span class="highlight">resistencia mecánica</span> extendiéndose desde la envoltura nuclear para dar estabilidad.</p>
                </div>
                <div class="cyto-item">
                    <div class="cyto-image" style="background-image: url('images/tubulina.png');"></div>
                    <h3>Microtúbulos (Tubulina)</h3>
                    <p>Los más gruesos (25 nm) originados en el centrosoma. Actúan como rutas de <span class="highlight">transporte intracelular</span>, forman el huso mitótico y componen cilios y flagelos.</p>
                </div>
            </div>
            <div class="note-block">
                <p>El citoesqueleto interactúa con la membrana plasmática y los orgánulos, coordinando la posición de estos, la forma celular y procesos de señalización, migración y anclaje de proteínas.</p>
            </div>
        </div>
    </section>

    <section id="seccion3" class="content-section">
        <div class="container">
            <h2>Sistema de Endomembranas: Fábrica y Distribución Celular</h2>
            <p class="section-intro">Coordina la síntesis, procesamiento y transporte de proteínas y lípidos, separando procesos metabólicos en compartimentos especializados.</p>
            <div class="endomembrane-timeline">
                <div class="timeline">
                    <div class="timeline-item left">
                        <div class="timeline-card">
                            <h3>Retículo Endoplasmático Rugoso (RER)</h3>
                            <p>Con ribosomas adheridos para sintetizar proteínas que luego se modifican (plegamiento, glicosilación) antes de ser transportadas.</p>
                        </div>
                        <div class="timeline-dot"></div>
                    </div>
                    <div class="timeline-item right">
                        <div class="timeline-dot"></div>
                        <div class="timeline-card">
                            <h3>Retículo Endoplasmático Liso (REL)</h3>
                            <p>Sin ribosomas. Se encarga de la síntesis de lípidos, el almacenamiento de calcio y la detoxificación de sustancias químicas.</p>
                        </div>
                    </div>
                    <div class="timeline-item left">
                        <div class="timeline-card">
                            <h3>Aparato de Golgi</h3>
                            <p>Recibe vesículas del RE para madurar, modificar (glicosilación, fosforilación) y clasificar proteínas y lípidos hacia su destino final.</p>
                        </div>
                        <div class="timeline-dot"></div>
                    </div>
                    <div class="timeline-item right">
                        <div class="timeline-dot"></div>
                        <div class="timeline-card">
                            <h3>Vesículas de Transporte</h3>
                            <p>Estructuras membranosas que trasladan materiales de forma controlada entre los compartimentos del sistema de endomembranas.</p>
                        </div>
                    </div>
                    <div class="timeline-item left">
                        <div class="timeline-card">
                            <h3>Lisosomas</h3>
                            <p>Vesículas especializadas con enzimas hidrolíticas para la digestión intracelular y la renovación de componentes celulares.</p>
                        </div>
                        <div class="timeline-dot"></div>
                    </div>
                    <div class="timeline-item right">
                        <div class="timeline-dot"></div>
                        <div class="timeline-card">
                            <h3>Endosomas</h3>
                            <p>Orgánulos de clasificación que reciben material endocitado, deciden su reciclaje o degradación y lo dirigen hacia los lisosomas.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="seccion4" class="content-section mec-section">
        <div class="container">
            <div class="mec-grid">
                <div class="mec-info">
                    <h2>Matriz Extracelular (MEC): Soporte y Comunicación Tisular</h2>
                    <p class="section-intro">La MEC es una red compleja de moléculas fuera de las células que proporciona soporte, cohesión y comunicación. Es un medio dinámico que influye en la forma, migración y supervivencia celular.</p>
                    <h3 class="mec-subtitle">Componentes Clave de la MEC</h3>
                    <div class="mec-items">
                        <div class="mec-item">
                            <div class="mec-icon"></div>
                            <div>
                                <h4>Proteínas Fibrosas</h4>
                                <p><span class="highlight">Colágeno</span> (resistencia a la tracción), <span class="highlight">Elastina</span> (elasticidad) y glicoproteínas como <span class="highlight">Fibronectina</span> y <span class="highlight">Laminina</span> que favorecen la adhesión celular.</p>
                            </div>
                        </div>
                        <div class="mec-item">
                            <div class="mec-icon"></div>
                            <div>
                                <h4>Proteoglucanos y GAGs</h4>
                                <p>Macromoléculas hidratadas (<span class="highlight">ácido hialurónico</span>, condroitín sulfato) que retienen agua, aportan amortiguación y resistencia a la compresión en tejidos como el cartílago.</p>
                            </div>
                        </div>
                        <div class="mec-item">
                            <div class="mec-icon"></div>
                            <div>
                                <h4>Membrana Basal</h4>
                                <p>MEC especializada que separa tejidos epiteliales, actuando como soporte físico y filtro selectivo.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="mec-visual">
                    <div class="mec-image-card">
                        <img src="images/membaranaExtracelular.jpg" alt="Matriz extracelular histológica">
                    </div>
                    <div class="mec-callout card card--glass">
                        <h4>Integrinas y señalización</h4>
                        <p>Las <span class="highlight">integrinas</span> enlazan citoesqueleto y MEC, traduciendo señales mecánicas en respuestas bioquímicas. Coordina adhesión, supervivencia y remodelación tisular.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="seccion5" class="content-section membrane-section">
        <div class="container">
            <div class="membrane-header">
                <h2>Membrana Plasmática: La Frontera Selectiva</h2>
                <p>Estructura vital que delimita la célula, manteniendo el ambiente interno estable y regulando el intercambio de sustancias. Actúa como barrera selectiva y dinámica, esencial para la supervivencia celular.</p>
            </div>
            <div class="membrane-layout">
                <div class="membrane-side1">
                    <div class="membrane-block card card--glass">
                        <h3>Bicapa Lipídica</h3>
                        <p>Fosfolípidos anfipáticos organizados que crean una capa fluida y semipermeable, con colas hidrofóbicas hacia el interior y cabezas hidrofílicas hacia el exterior.</p>
                    </div>
                    <div class="membrane-block card card--glass">
                        <h3>Glucocálix</h3>
                        <p>Capa rica en carbohidratos (glucoproteínas y glucolípidos) que protege, permite el reconocimiento celular y modula la adhesión a la MEC.</p>
                    </div>
                </div>
                <div class="membrane-diagram">
                    <div class="membrane-circle">
                        <img src="images/circle2.png" alt="diagrama de circulo">
                        <span class="segment-icon icon-lipid"></span>
                        <span class="segment-icon icon-carb"></span>
                        <span class="segment-icon icon-chol"></span>
                        <span class="segment-icon icon-protein"></span>
                    </div>
                </div>
                <div class="membrane-side2">
                    <div class="membrane-block card card--glass">
                        <h3>Colesterol</h3>
                        <p>Modula la fluidez de la membrana, evitando que se rigidice o se vuelva demasiado permeable ante cambios de temperatura.</p>
                    </div>
                    <div class="membrane-block card card--glass">
                        <h3>Proteínas de Membrana</h3>
                        <p>Integrales y periféricas que actúan como canales, transportadores, receptores y anclajes para el citoesqueleto, coordinando respuestas celulares.</p>
                    </div>
                </div>
            </div>
            <p class="membrane-footer">El modelo del <span class="highlight">mosaico fluido</span> explica la movilidad de lípidos y proteínas. La membrana regula el transporte, señalización, endocitosis, exocitosis y contacto célula-célula.</p>
        </div>
    </section>

    <section id="seccion6" class="content-section mito-section">
    <div class="container">
        <div class="mito-grid">
            <div class="mito-header">
                <h2>Mitocondrias: Centrales Energéticas y Reguladoras</h2>
                <p class="section-intro">
                    Orgánulos dinámicos con doble membrana que generan ATP mediante respiración celular
                    y regulan metabolismo, calcio y apoptosis.
                </p>
            </div>
            <div class="mito-left">
                <div class="mito-illustration">
                    <img src="images/mitocondria.png" alt="Ilustración de mitocondria">
                </div>
                <p class="mito-caption">
                    Las mitocondrias poseen su propio ADN circular y ribosomas, un vestigio de su origen endosimbiótico a partir de bacterias primitivas.
                </p>
            </div>
            <div class="mito-right">
                <div class="mito-card">
                    <div class="mito-icon">1</div>
                    <h3>Doble Membrana</h3>
                    <p>
                        Membrana externa permeable y membrana interna selectiva altamente plegada en
                        crestas para maximizar reacciones energéticas.
                    </p>
                </div>
                <div class="mito-card">
                    <div class="mito-icon">2</div>
                    <h3>Matriz Mitocondrial</h3>
                    <p>
                        Contiene enzimas, ADN circular y ribosomas propios. Aquí se lleva a cabo el Ciclo
                        de Krebs, generando electrones y protones.
                    </p>
                </div>
                <div class="mito-card">
                    <div class="mito-icon">3</div>
                    <h3>Fosforilación Oxidativa</h3>
                    <p>
                        La cadena de transporte de electrones crea un gradiente de protones que impulsa
                        la ATP sintasa, produciendo la mayor parte del ATP celular.
                    </p>
                </div>
            </div>
        </div>
        <p class="mito-footer">
            La abundancia de mitocondrias varía con la demanda energética celular. Su dinámica de fusión
            y fisión regula calidad, comunicación y apoptosis.
        </p>
    </div>
</section>

    <section id="seccion7" class="content-section nucleo-section">
        <div class="container">
            <div class="nucleo-header">
                <h2>Núcleo: El Centro de Control Genético</h2>
                <p>Orgánulo característico de las células eucariotas que organiza y protege el ADN, dirigiendo la expresión génica, el crecimiento y la división celular.</p>
            </div>
            <div class="nucleo-image">
                <img src="images/nucleo.jpg" alt="Micrografía de núcleo celular">
            </div>
            <div class="nucleo-cards">
                <div class="nucleo-card">
                    <div class="nucleo-badge">1</div>
                    <h3>Envoltura Nuclear</h3>
                    <p>Doble membrana con poros que permite el intercambio selectivo de ARN y proteínas entre núcleo y citoplasma, manteniendo compartimentación.</p>
                </div>
                <div class="nucleo-card">
                    <div class="nucleo-badge">2</div>
                    <h3>Cromatina</h3>
                    <p>ADN asociado a histonas que alterna entre eucromatina (activa) y heterocromatina (compacta). Se condensa en cromosomas durante la división.</p>
                </div>
                <div class="nucleo-card">
                    <div class="nucleo-badge">3</div>
                    <h3>Nucléolo</h3>
                    <p>Región densa no membranosa encargada de sintetizar y ensamblar subunidades ribosomales que luego se exportan al citoplasma.</p>
                </div>
            </div>
            <p class="nucleo-footer">El núcleo coordina la replicación del ADN, la transcripción y el procesamiento de ARN, asegurando la continuidad y regulación de la información genética.</p>
        </div>
    </section>

    <section id="seccion8" class="content-section senal-section">
        <div class="container">
            <div class="senal-header">
                <h2>Señalización Celular: Comunicación y Coordinación</h2>
                <p>Mecanismo esencial para que las células reciban, interpreten y respondan a señales del entorno o de otras células, coordinando funciones como el crecimiento, la diferenciación y la homeostasis.</p>
            </div>
            <div class="senal-arrows">
                <div class="arrow-step">Ligando se une</div>
                <div class="arrow-step">Receptor activado</div>
                <div class="arrow-step">Cascada de segundos</div>
                <div class="arrow-step">Respuesta celular</div>
            </div>
            <div class="senal-text">
                <p>La señal se inicia con la unión de un ligando a un receptor específico, activando adaptadores y segundos mensajeros que amplifican la respuesta.</p>
                <ul>
                    <li><span class="highlight">Endocrina:</span> hormonas viajan por la sangre hacia células distantes.</li>
                    <li><span class="highlight">Paracrina:</span> actúa localmente sobre células vecinas.</li>
                    <li><span class="highlight">Autocrina:</span> la célula regula sus propias respuestas.</li>
                    <li><span class="highlight">Sináptica:</span> neurotransmisores entre neuronas.</li>
                </ul>
                <p>La respuesta final puede ser cambio génico, modificación metabólica, proliferación o apoptosis, integrando la intensidad y duración de las señales recibidas.</p>
            </div>
        </div>
    </section>

    <section id="seccion9" class="content-section prote-section">
        <div class="container">
            <div class="prote-header">
                <h2>Síntesis de Proteínas: Del Gen a la Función</h2>
                <p>Proceso esencial que traduce la información genética del ADN en proteínas funcionales, coordinando dos etapas principales: transcripción y traducción.</p>
            </div>
            <div class="prote-grid">
                    <div class="prote-card">
                        <h3>1. Transcripción</h3>
                        <p>La ARN polimerasa copia un gen a ARNm dentro del núcleo, añadiendo caperuza y cola para estabilizar el mensaje.</p>
                    </div>
                    <div class="prote-card">
                        <h3>2. Traducción</h3>
                        <p>En los ribosomas, el ARNm se lee en codones. El ARNt entrega aminoácidos que se enlazan formando la cadena polipeptídica.</p>
                    </div>
                    <div class="prote-card">
                        <h3>3. Plegamiento y Modificación</h3>
                        <p>Chaperonas ayudan al plegamiento, mientras el RE y Golgi añaden modificaciones como glucosilación y ensamblaje de subunidades.</p>
                    </div>
                    <div class="prote-card">
                        <h3>4. Destino Final</h3>
                        <p>Las proteínas se dirigen al citoplasma, membranas, orgánulos o al exterior mediante vesículas del sistema de endomembranas.</p>
                    </div>
            </div>
            <div class="prote-footer">
                <p>La síntesis proteica está finamente regulada: errores en lectura, plegamiento o tráfico generan proteínas defectuosas que afectan la función celular.</p>
            </div>
        </div>
    </section>
         <section id="seccion10" class="content-section vision-section">
    <div class="container">
        <div class="vision-header">
            <h2>Visión Global de la Célula</h2>
            <div class="vision-image">
                <img src="images/celula1.jpg" class="section-img-uniform" alt="Visión global de la célula">
            </div>

            <p class="section-intro">
                La célula es la unidad estructural, funcional y genética de todos los seres vivos. A partir del estudio microscópico y molecular, se ha comprendido que, aunque existen distintos tipos de células, todas comparten una organización básica y una serie de procesos comunes que garantizan su funcionamiento y supervivencia.
            </p>
        </div>
        <div class="sub-menu-advanced">
            <button data-target="punto1">Membrana</button>
            <button data-target="punto2">Citoplasma</button>
            <button data-target="punto3">Organelos</button>
            <button data-target="punto4">Núcleo</button>
            <button data-target="punto5">Expresión Génica</button>
            <button data-target="punto6">Metabolismo</button>
            <button data-target="punto7">Tipos Celulares</button>
            <button data-target="punto8">Señalización</button>
            <button data-target="punto9">Sistema Abierto</button>
        </div>
        <div id="punto1" class="global-card fade-in">
        <div id="punto2" class="global-card fade-in">
        <div id="punto3" class="global-card fade-in">
        <div id="punto4" class="global-card fade-in">
        <div id="punto5" class="global-card fade-in">
        <div id="punto6" class="global-card fade-in">
        <div id="punto7" class="global-card fade-in">
        <div id="punto8" class="global-card fade-in">   
        <div id="punto9" class="global-card fade-in">
        </div>
        <p class="vision-footer">
                    Todas las funciones y estructuras celulares forman un sistema integrado capaz de mantener la vida mediante equilibrio, comunicación y adaptación continua.
                </p>
</section>
<script>
// Scroll al subtema correcto
document.querySelectorAll('.sub-menu-advanced button').forEach(btn => {
    btn.addEventListener('click', () => {
        const id = btn.dataset.target;
        const target = document.getElementById(id);

        if (target) {
            const offset = target.getBoundingClientRect().top + window.pageYOffset - 130;
        }
    });
});

// Resaltado dinámico mientras haces scroll
const sections = document.querySelectorAll(
    "#punto1, #punto2, #punto3, #punto4, #punto5, #punto6, #punto7, #punto8, #punto9"
);

const buttons = document.querySelectorAll('.sub-menu-advanced button');

const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            buttons.forEach(btn => btn.classList.remove('active'));
            const btn = document.querySelector(
                `.sub-menu-advanced button[data-target="${entry.target.id}"]`
            );
            if (btn) btn.classList.add('active');
        }
    });
}, { threshold: 0.55 });

sections.forEach(sec => observer.observe(sec));
</script>
<div id="infoModal" class="modal-overlay">
    <div class="modal-box">
        <span class="close-modal">&times;</span>
        <h3 id="modalTitle"></h3>
        <p id="modalContent"></p>
    </div>
</div>
<script>
// Contenido de cada subtema
const subtemas = {
    punto1: {
        titulo: "Membrana Celular",
        texto: " La célula está rodeada por una membrana plasmática, una estructura dinámica que delimita el espacio celular y regula el intercambio de sustancias con el medio externo. Esta membrana no solo actúa como barrera, sino también como un sistema de comunicación que recibe señales, reconoce otras células y permite la interacción con la matriz extracelular."
    },
    punto2: {
        titulo: "Citoplasma",
        texto: "En el interior de la célula se encuentra el citoplasma, un medio acuoso donde se localizan los orgánulos y en el que se desarrollan numerosas reacciones metabólicas. En el citoplasma se distinguen dos componentes: el citosol, que es la fracción líquida rica en enzimas y moléculas disueltas, y el citoesqueleto, una red de filamentos que mantiene la forma celular, permite el movimiento y organiza los orgánulos internos."
    },
    punto3: {
        titulo: "Organelos",
        texto: "Dentro del citoplasma se hallan los orgánulos celulares, estructuras especializadas que desempeñan funciones específicas. Las mitocondrias generan energía en forma de ATP; el retículo endoplasmático rugoso sintetiza proteínas; el retículo endoplasmático liso produce lípidos y detoxifica sustancias; el aparato de Golgi modifica y distribuye productos celulares; los lisosomas degradan moléculas y organelos dañados; y los peroxisomas intervienen en la oxidación de lípidos y la eliminación de radicales tóxicos."
    },
    punto4: {
        titulo: "Núcleo",
        texto: "En el centro de la célula se encuentra el núcleo, que alberga el material genético (ADN) organizado en cromatina y cromosomas. Desde allí se controla la expresión de los genes y, por tanto, la síntesis de proteínas que determinan las características y funciones celulares. El nucléolo, situado dentro del núcleo, es el lugar donde se fabrican los ribosomas, esenciales para la traducción del código genético"
    },
    punto5: {
        titulo: "Expresión Génica",
        texto: "Todas las funciones celulares están estrechamente interconectadas. El ADN del núcleo contiene la información que se transcribe en ARN, el cual se traduce en los ribosomas para producir proteínas. Estas proteínas pueden ser utilizadas en el citoplasma o transportadas mediante el sistema de endomembranas hacia el aparato de Golgi, donde son modificadas y dirigidas a su destino final."
    },
    punto6: {
        titulo: "Metabolismo",
        texto: "Las células se mantienen vivas gracias a un conjunto de procesos energéticos y metabólicos. A través de la respiración celular en las mitocondrias, se obtiene la energía necesaria para realizar todas las actividades vitales. Además, las células regulan su crecimiento, su división y su muerte mediante señales internas y externas que aseguran el equilibrio del organismo"
    },
    punto7: {
        titulo: "Tipos Celulares",
        texto: "A pesar de la diversidad celular existente —como las células musculares, nerviosas, epiteliales o sanguíneas—, todas comparten los mismos principios estructurales. Cada tipo celular está especializado para realizar una función concreta, pero todas trabajan de manera coordinada dentro de los tejidos, los órganos y los sistemas del cuerpo. Esta cooperación celular es esencial para el mantenimiento de la vida en los organismos multicelulares."
    },
    punto8: {
        titulo: "Señalización Celular",
        texto: "Las interacciones entre las células y su entorno son fundamentales. A través de la señalización celular, las células se comunican entre sí y responden a estímulos químicos, eléctricos o mecánicos. La matriz extracelular y las uniones intercelulares garantizan la cohesión y la organización de los tejidos, mientras que la comunicación por hormonas y neurotransmisores coordina las funciones a nivel del organismo."
    },
    punto9: {
        titulo: "Sistema Abierto",
        texto: "Desde una perspectiva global, la célula puede considerarse un sistema abierto y autorregulado que intercambia materia y energía con el medio. Mantiene su organización interna mediante procesos como el transporte vesicular, la síntesis de proteínas, la degradación de compuestos y la renovación constante de sus componentes. Esta actividad coordinada permite que la célula crezca, se reproduzca y se adapte a los cambios ambientales."
    }
};

// Abrir modal al hacer clic en el menú
document.querySelectorAll('.sub-menu-advanced button').forEach(btn => {
    btn.addEventListener('click', () => {
        const id = btn.dataset.target;
        const info = subtemas[id];

        document.getElementById("modalTitle").innerText = info.titulo;
        document.getElementById("modalContent").innerText = info.texto;

        document.getElementById("infoModal").style.display = "flex";
    });
});

// Cerrar modal
document.querySelector(".close-modal").addEventListener("click", () => {
    document.getElementById("infoModal").style.display = "none";
});

// Cerrar al hacer clic fuera
document.getElementById("infoModal").addEventListener("click", (e) => {
    if (e.target === e.currentTarget) {
        e.currentTarget.style.display = "none";
    }
});
</script>

<!-- =======================================================
     SECCIÓN DE VIDEOS DE LA PÁGINA
======================================================= -->

<section id="videosSection" class="videos-section">
    <h2 class="videos-title">Videos Subidos a la Página</h2>

    <div class="video-container">
        <video id="videoPlayer" controls>
            <source id="videoSource" src="" type="video/mp4">
            Tu navegador no soporta videos HTML5.
        </video>
    </div>
    <button class="go-videos-btn" onclick="scrollToVideos()">
    Ver Videos Subidos
</button>
   <button class="upload-video-btn" onclick="document.getElementById('videoUploadInput').click();">
    Subir Video
</button>

<input type="file" id="videoUploadInput" accept="video/*" style="display: none;">
</section>
<script>
const videoInput = document.getElementById("videoUploadInput");
const videoPlayer = document.getElementById("videoPlayer");
const videoSource = document.getElementById("videoSource");

// Cuando se sube un video
videoInput.addEventListener("change", () => {
    const file = videoInput.files[0];
    if (!file) return;

    const url = URL.createObjectURL(file);
    videoSource.src = url;
    videoPlayer.load();
    videoPlayer.play();

    // bajar directo a la sección de videos
    scrollToVideos();
});

// función del botón "Ver Videos"
function scrollToVideos() {
    const section = document.getElementById("videosSection");
    section.scrollIntoView({ behavior: "smooth" });
}

// Funciones para los modales de autenticación
function openLoginModal() {
    // hide entry gate so user can interact with the page beneath
    closeEntryGate();
    const modal = document.getElementById("loginModal");
    modal.style.display = "flex";
    modal.setAttribute('aria-hidden', 'false');
    document.getElementById("login-message").innerHTML = "";
}

function closeLoginModal() {
    const modal = document.getElementById("loginModal");
    modal.style.display = "none";
    modal.setAttribute('aria-hidden', 'true');
    document.getElementById("loginForm").reset();
    document.getElementById("login-message").innerHTML = "";
    
    // Mostrar la pantalla de entrada nuevamente
    const gate = document.getElementById('entryGate');
    if (gate && gate.style.display === 'none') {
        gate.style.display = 'flex';
        gate.classList.remove('fade-out');
        document.body.classList.add('showing-gate');
    }
}

function openRegisterModal() {
    // hide entry gate so user can interact with the page beneath
    closeEntryGate();
    const modal = document.getElementById("registerModal");
    modal.style.display = "flex";
    modal.setAttribute('aria-hidden', 'false');
    document.getElementById("register-message").innerHTML = "";
}

// Close the entry gate overlay so page becomes interactive
function closeEntryGate() {
    const gate = document.getElementById('entryGate');
    if (!gate) return;

    // add fade-out class to trigger CSS animation
    gate.classList.add('fade-out');

    // after animation ends, hide the element and restore body scrolling
    const cleanup = () => {
        gate.style.display = 'none';
        document.body.classList.remove('showing-gate');
        gate.removeEventListener('animationend', cleanup);
    };

    gate.addEventListener('animationend', cleanup);
    // fallback in case animationend doesn't fire
    setTimeout(cleanup, 1100);
}

function closeRegisterModal() {
    const modal = document.getElementById("registerModal");
    modal.style.display = "none";
    modal.setAttribute('aria-hidden', 'true');
    document.getElementById("registerForm").reset();
    document.getElementById("register-message").innerHTML = "";
    
    // Mostrar la pantalla de entrada nuevamente
    const gate = document.getElementById('entryGate');
    if (gate && gate.style.display === 'none') {
        gate.style.display = 'flex';
        gate.classList.remove('fade-out');
        document.body.classList.add('showing-gate');
    }
}

function switchToRegister() {
    closeLoginModal();
    openRegisterModal();
}

function switchToLogin() {
    closeRegisterModal();
    openLoginModal();
}

function switchToLoginFromRegister() {
    closeRegisterModal();
    openLoginWindow();
}

// NEW: handlers for the modern "login window" (ID: `loginWindow`)
function openLoginWindow() {
    const win = document.getElementById('loginWindow');
    if (win) {
        // hide entry gate so user can interact with page
        closeEntryGate();
        win.style.display = 'flex';
        win.setAttribute('aria-hidden', 'false');
    } else {
        // fallback to legacy modal if the window element is missing
        openLoginModal();
    }
}

function closeLoginWindow() {
    const win = document.getElementById('loginWindow');
    if (win) {
        win.style.display = 'none';
        win.setAttribute('aria-hidden', 'true');
        const form = document.getElementById('loginWindowForm');
        if (form) form.reset();
    }
    
    // Mostrar la pantalla de entrada nuevamente
    const gate = document.getElementById('entryGate');
    if (gate && gate.style.display === 'none') {
        gate.style.display = 'flex';
        gate.classList.remove('fade-out');
        document.body.classList.add('showing-gate');
    }
}

function handleLoginWindow(event) {
    event.preventDefault();
    const email = document.getElementById('lw-email').value;
    const password = document.getElementById('lw-password').value;

    const users = JSON.parse(localStorage.getItem('users') || '[]');
    const user = users.find(u => u.email === email && u.password === password);

    if (!user) {
        // lightweight feedback for this simple demo
        alert('Correo o contraseña incorrectos');
        return;
    }

    localStorage.setItem('currentUser', JSON.stringify(user));
    closeLoginWindow();
    updateUIForLoggedInUser(user);
}

function switchFromWindowToRegister() {
    closeLoginWindow();
    openRegisterModal();
}

// Función para manejar el registro
function handleRegister(event) {
    event.preventDefault();
    
    const name = document.getElementById("register-name").value;
    const email = document.getElementById("register-email").value;
    const password = document.getElementById("register-password").value;
    const confirmPassword = document.getElementById("register-confirm").value;
    const messageDiv = document.getElementById("register-message");
    
    // Validar que las contraseñas coincidan
    if (password !== confirmPassword) {
        messageDiv.innerHTML = '<p class="error-message">Las contraseñas no coinciden</p>';
        return;
    }
    
    // Verificar si el usuario ya existe
    const users = JSON.parse(localStorage.getItem("users") || "[]");
    const userExists = users.find(user => user.email === email);
    
    if (userExists) {
        messageDiv.innerHTML = '<p class="error-message">Este correo ya está registrado</p>';
        return;
    }
    
    // Guardar el nuevo usuario
    const newUser = {
        name: name,
        email: email,
        password: password,
        registeredAt: new Date().toISOString()
    };
    
    users.push(newUser);
    localStorage.setItem("users", JSON.stringify(users));
    
    messageDiv.innerHTML = '<p class="success-message">¡Registro exitoso! Redirigiendo...</p>';
    
    // Hacer login automático después del registro
    setTimeout(() => {
        localStorage.setItem("currentUser", JSON.stringify(newUser));
        closeRegisterModal();
        updateUIForLoggedInUser(newUser);
    }, 1500);
}

// Función para manejar el login
function handleLogin(event) {
    event.preventDefault();
    
    const email = document.getElementById("login-email").value;
    const password = document.getElementById("login-password").value;
    const messageDiv = document.getElementById("login-message");
    
    // Buscar el usuario
    const users = JSON.parse(localStorage.getItem("users") || "[]");
    const user = users.find(user => user.email === email && user.password === password);
    
    if (!user) {
        messageDiv.innerHTML = '<p class="error-message">Correo o contraseña incorrectos</p>';
        return;
    }
    
    // Guardar sesión
    localStorage.setItem("currentUser", JSON.stringify(user));
    messageDiv.innerHTML = '<p class="success-message">¡Inicio de sesión exitoso!</p>';
    
    setTimeout(() => {
        closeLoginModal();
        updateUIForLoggedInUser(user);
    }, 1000);
}

// Función para cerrar sesión
function handleLogout() {
    localStorage.removeItem("currentUser");
    
    // Ocultar header de usuario
    const userHeader = document.getElementById("userHeader");
    if (userHeader) userHeader.style.display = "none";
    
    // Ocultar menú de navegación
    const mainNav = document.getElementById("mainNav");
    if (mainNav) mainNav.style.display = "none";
    
    // Mostrar pantalla de entrada nuevamente
    const gate = document.getElementById('entryGate');
    if (gate) {
        gate.style.display = 'flex';
        gate.classList.remove('fade-out');
        document.body.classList.add('showing-gate');
    }
    
    // Limpiar cualquier modal abierto
    closeLoginModal();
    closeRegisterModal();
    closeLoginWindow();
}

// Actualizar UI cuando el usuario está logueado
function updateUIForLoggedInUser(user) {
    // Ocultar pantalla de entrada
    closeEntryGate();
    
    // Mostrar header con info de usuario
    const userHeader = document.getElementById("userHeader");
    const headerUserName = document.getElementById("headerUserName");
    const headerUserEmail = document.getElementById("headerUserEmail");
    const userInitials = document.getElementById("userInitials");
    
    if (userHeader) userHeader.style.display = "block";
    if (headerUserName && user && user.name) headerUserName.textContent = user.name;
    if (headerUserEmail && user && user.email) headerUserEmail.textContent = user.email;
    
    // Generar iniciales del nombre
    if (userInitials && user && user.name) {
        const names = user.name.trim().split(' ');
        const initials = names.length >= 2 
            ? names[0][0] + names[names.length - 1][0]
            : names[0][0];
        userInitials.textContent = initials.toUpperCase();
    }
    
    // Mostrar menú de navegación
    const mainNav = document.getElementById("mainNav");
    if (mainNav) mainNav.style.display = "flex";
}

// Verificar si hay un usuario logueado al cargar la página
window.addEventListener("DOMContentLoaded", () => {
    const currentUser = localStorage.getItem("currentUser");
    if (currentUser) {
        const user = JSON.parse(currentUser);
        updateUIForLoggedInUser(user);
    }
    
    // Smooth scroll para los enlaces del menú de navegación
    document.querySelectorAll('#mainNav .nav-link').forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const targetId = this.getAttribute('href');
            const targetSection = document.querySelector(targetId);
            
            if (targetSection) {
                // Obtener la altura del header (no del nav/sidebar)
                const headerHeight = document.getElementById('userHeader').offsetHeight;
                const targetPosition = targetSection.getBoundingClientRect().top + window.pageYOffset - headerHeight - 20;
                
                window.scrollTo({
                    top: targetPosition,
                    behavior: 'smooth'
                });
                
                // Marcar manualmente el enlace como activo
                document.querySelectorAll('#mainNav .nav-link').forEach(l => l.classList.remove('active'));
                this.classList.add('active');
            }
        });
    });
    
    // Resaltar enlace activo según la sección visible
    const navLinks = document.querySelectorAll('#mainNav .nav-link');
    const sections = document.querySelectorAll('section[id^="seccion"]');
    
    const observerOptions = {
        root: null,
        rootMargin: '-100px 0px -60% 0px',
        threshold: 0
    };
    
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const activeId = entry.target.getAttribute('id');
                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href') === `#${activeId}`) {
                        link.classList.add('active');
                    }
                });
            }
        });
    }, observerOptions);
    
    sections.forEach(section => observer.observe(section));
});

// Nota: ya no cerramos los modales de login/registro al hacer clic fuera.
// Esto evita que el usuario pierda accidentalmente el formulario al tocar fuera.
// Si en el futuro se necesita cerrar al hacer clic fuera, implementar manejadores
// individuales en cada modal usando `addEventListener('click', ...)` y comprobando
// `e.target === e.currentTarget`.

// Evitar que la tecla Escape cierre modales de login/registro (hacer obligatorio)
window.addEventListener('keydown', function(e) {
    if (e.key === 'Escape' || e.key === 'Esc') {
        // si alguno de los modales de autenticación está abierto, prevenir acción
        const loginOpen = (document.getElementById('loginModal') || {}).style?.display === 'block';
        const registerOpen = (document.getElementById('registerModal') || {}).style?.display === 'block';
        const loginWindowOpen = (document.getElementById('loginWindow') || {}).style?.display === 'flex';

        if (loginOpen || registerOpen || loginWindowOpen) {
            e.stopPropagation();
            e.preventDefault();
        }
    }
}, true);
</script>
</body>
</html>
